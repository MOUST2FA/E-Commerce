"use strict";(self.webpackChunkprohects=self.webpackChunkprohects||[]).push([[345],{1345:(u,p,n)=>{n.r(p),n.d(p,{WishlistComponent:()=>I});var d=n(177),m=n(3276),l=n(9969),t=n(2598),c=n(5426),v=n(6323),a=n(5794);function _(r,h){if(1&r){const i=t.RV6();t.j41(0,"i",20),t.bIt("click",function(){t.eBV(i);const e=t.XpG().$implicit,o=t.XpG(2);return t.Njj(o.addWishlist(e._id))}),t.k0s()}}function g(r,h){if(1&r){const i=t.RV6();t.j41(0,"i",21),t.bIt("click",function(){t.eBV(i);const e=t.XpG().$implicit,o=t.XpG(2);return t.Njj(o.removeWishlist(e._id))}),t.k0s()}}const f=function(r){return["/details",r]};function C(r,h){if(1&r){const i=t.RV6();t.j41(0,"div",5),t.DNE(1,_,1,0,"i",6),t.DNE(2,g,1,0,"i",7),t.j41(3,"div",8)(4,"div",9),t.nrm(5,"img",10),t.k0s(),t.j41(6,"div",11)(7,"h5",12),t.EFF(8),t.k0s(),t.j41(9,"h3",13),t.EFF(10),t.k0s(),t.j41(11,"div",14)(12,"p",15),t.EFF(13),t.k0s(),t.j41(14,"p",15),t.nrm(15,"i",16),t.EFF(16),t.k0s()()()(),t.j41(17,"div",17)(18,"button",18,19),t.bIt("click",function(){const o=t.eBV(i).$implicit,b=t.sdS(19),x=t.XpG(2);return t.Njj(x.addCart(o._id,b))}),t.EFF(20,"+add To Cart"),t.k0s()()()}if(2&r){const i=h.$implicit,s=t.XpG(2);t.R7$(1),t.Y8G("ngIf",!s.wishlistId.includes(i._id)),t.R7$(1),t.Y8G("ngIf",s.wishlistId.includes(i._id)),t.R7$(1),t.Y8G("routerLink",t.eq3(8,f,i._id)),t.R7$(2),t.Y8G("src",i.imageCover,t.B4B),t.R7$(3),t.JRh(i.category.name),t.R7$(2),t.JRh(i.brand.name),t.R7$(3),t.SpI("",i.price," EGP"),t.R7$(3),t.SpI(" ",i.ratingsAverage,"")}}function W(r,h){if(1&r&&(t.j41(0,"div",3),t.DNE(1,C,21,10,"div",4),t.k0s()),2&r){const i=t.XpG();t.Y8G("@translateY",void 0),t.R7$(1),t.Y8G("ngForOf",i.displayWishlist)}}function E(r,h){1&r&&t.nrm(0,"div",22)}let I=(()=>{class r{constructor(i,s,e,o){this._WishlistService=i,this._Renderer2=s,this._CartService=e,this._ToastrService=o,this.displayWishlist=[],this.wishlistId=[]}ngOnInit(){this._WishlistService.getToWishlist().subscribe({next:i=>{this.displayWishlist=i.data;const s=i.data.map(e=>e._id);this.wishlistId=s},error:i=>{console.log(i)}})}addCart(i,s){this._Renderer2.setAttribute(s,"disabled","true"),this._CartService.addToCart(i).subscribe({next:e=>{this._CartService.cartNum.next(e.numOfCartItems),this._ToastrService.success(e.message),this._Renderer2.removeAttribute(s,"disabled")},error:e=>{console.log(e),this._Renderer2.removeAttribute(s,"disabled")}})}addWishlist(i){this._WishlistService.addToWishlist(i).subscribe({next:s=>{this._ToastrService.success(s.message)},error:s=>{console.log(s)}})}removeWishlist(i){this._WishlistService.removeToWishlist(i).subscribe({next:s=>{this.wishlistId=s.data;const e=this.displayWishlist.filter(o=>this.wishlistId.includes(o._id));this.displayWishlist=e,this._WishlistService.numWishlist.next(s.data.length),this._ToastrService.error(s.message)},error:s=>{console.log(s)}})}static#t=this.\u0275fac=function(s){return new(s||r)(t.rXU(c.F),t.rXU(t.sFG),t.rXU(v.m),t.rXU(a.tw))};static#i=this.\u0275cmp=t.VBU({type:r,selectors:[["app-wishlist"]],standalone:!0,features:[t.aNF],decls:3,vars:2,consts:[[1,"mt-14"],["class","grid-cols-12 grid gap-4 cursor-pointer",4,"ngIf"],["class","nb-spinner",4,"ngIf"],[1,"grid-cols-12","grid","gap-4","cursor-pointer"],["class","col-span-12 sm:col-span-6 md:col-span-4 lg:col-span-3 xl:col-span-2 product border-2 border-green-600 rounded-md",4,"ngFor","ngForOf"],[1,"col-span-12","sm:col-span-6","md:col-span-4","lg:col-span-3","xl:col-span-2","product","border-2","border-green-600","rounded-md"],["class","fa-regular fa-heart hart",3,"click",4,"ngIf"],["class","fa-solid fa-heart hart text-red-500",3,"click",4,"ngIf"],[3,"routerLink"],[1,"imgScale"],["alt","imgProduct",1,"w-full",3,"src"],[1,"px-3"],[1,"font-light","text-lg","dark:text-gray-200"],[1,"font-normal","text-xl","text-main"],[1,"flex","justify-between","mt-2"],[1,"dark:text-gray-200"],[1,"fa-solid","fa-star","rating-color"],[1,"px-3","pb-3"],[1,"main-btn","w-full","mt-2","add-btn",3,"click"],["btn",""],[1,"fa-regular","fa-heart","hart",3,"click"],[1,"fa-solid","fa-heart","hart","text-red-500",3,"click"],[1,"nb-spinner"]],template:function(s,e){1&s&&(t.j41(0,"section",0),t.DNE(1,W,2,2,"div",1),t.k0s(),t.DNE(2,E,1,0,"div",2)),2&s&&(t.R7$(1),t.Y8G("ngIf",0!=e.displayWishlist.length),t.R7$(1),t.Y8G("ngIf",0==e.displayWishlist.length))},dependencies:[d.MD,d.Sq,d.bT,m.Wk],data:{animation:[(0,l.hZ)("translateY",[(0,l.kY)("void=>*",[(0,l.iF)({opacity:0,transform:"translateY(100px)"}),(0,l.i0)(500,(0,l.iF)({opacity:1,transform:"translateY(0)"}))])])]}})}return r})()},6323:(u,p,n)=>{n.d(p,{m:()=>t});var d=n(4412),m=n(2598),l=n(1626);let t=(()=>{class c{constructor(a){this._HttpClient=a,this.cartNum=new d.t(0),this.baseUrl="https://ecommerce.routemisr.com/api/v1/"}addToCart(a){return this._HttpClient.post(this.baseUrl+"cart",{productId:a})}getCart(){return this._HttpClient.get(this.baseUrl+"cart")}removeCart(a){return this._HttpClient.delete(this.baseUrl+`cart/${a}`)}clearAllCart(){return this._HttpClient.delete(this.baseUrl+"cart")}changeCountCart(a,_){return this._HttpClient.put(this.baseUrl+`cart/${a}`,{count:_})}checkOutPayment(a,_){return this._HttpClient.post(`https://ecommerce.routemisr.com/api/v1/orders/checkout-session/${a}?url=https://moust2fa.github.io/E-Commerce/`,{shippingAddress:_})}allOrder(){return this._HttpClient.get(this.baseUrl+"orders/")}static#t=this.\u0275fac=function(_){return new(_||c)(m.KVO(l.Qq))};static#i=this.\u0275prov=m.jDH({token:c,factory:c.\u0275fac,providedIn:"root"})}return c})()}}]);