"use strict";(self.webpackChunkprohects=self.webpackChunkprohects||[]).push([[727],{2727:(g,p,o)=>{o.r(p),o.d(p,{CartComponent:()=>E});var m=o(177),C=o(3276),d=o(9969),t=o(2598),l=o(6323);function v(s,b){if(1&s){const e=t.RV6();t.j41(0,"div",11)(1,"div",12),t.nrm(2,"img",13),t.k0s(),t.j41(3,"div",14)(4,"div",15)(5,"div",16)(6,"p",17),t.EFF(7),t.k0s(),t.j41(8,"h4",18),t.EFF(9),t.k0s(),t.j41(10,"button",19,20),t.bIt("click",function(){const i=t.eBV(e).$implicit,c=t.sdS(11),u=t.XpG(2);return t.Njj(u.removeCartElement(i.product._id,c))}),t.nrm(12,"i",21),t.EFF(13," Remove"),t.k0s()(),t.j41(14,"div",22)(15,"button",23,24),t.bIt("click",function(){const i=t.eBV(e).$implicit,c=t.sdS(16),u=t.sdS(21),h=t.XpG(2);return t.Njj(h.changeCount(i.product._id,i.count+1,c,u))}),t.EFF(17,"+"),t.k0s(),t.j41(18,"span",25),t.EFF(19),t.k0s(),t.j41(20,"button",23,26),t.bIt("click",function(){const i=t.eBV(e).$implicit,c=t.sdS(16),u=t.sdS(21),h=t.XpG(2);return t.Njj(h.changeCount(i.product._id,i.count-1,c,u))}),t.EFF(22,"-"),t.k0s()()()()()}if(2&s){const e=b.$implicit;t.Y8G("@translateY",void 0),t.R7$(2),t.Y8G("src",e.product.imageCover,t.B4B)("alt",e.product.title),t.R7$(5),t.JRh(e.product.title),t.R7$(2),t.SpI("",e.price," EGP"),t.R7$(10),t.JRh(e.count)}}function a(s,b){if(1&s&&(t.j41(0,"div"),t.DNE(1,v,23,6,"div",10),t.k0s()),2&s){const e=t.XpG();t.R7$(1),t.Y8G("ngForOf",e.getCart.products)}}function _(s,b){1&s&&t.nrm(0,"div",27)}const f=function(s){return["/checkOut",s]};let E=(()=>{class s{constructor(e,r){this._CartService=e,this._Renderer2=r,this.getCart=[]}ngOnInit(){this._CartService.getCart().subscribe({next:e=>{this.getCart=e.data},error:e=>{console.log(e)}})}removeCartElement(e,r){this._Renderer2.setAttribute(r,"disabled","true"),this._CartService.removeCart(e).subscribe({next:n=>{this._Renderer2.removeAttribute(r,"disabled"),this.getCart=n.data,this._CartService.cartNum.next(n.numOfCartItems)},error:n=>{console.log(n),this._Renderer2.removeAttribute(r,"disabled")}})}clearAllCart(e){this._Renderer2.setAttribute(e,"disabled","true"),this._CartService.clearAllCart().subscribe({next:r=>{this.getCart="",this._Renderer2.removeAttribute(e,"disabled"),this._CartService.cartNum.next(0)},error:r=>{console.log(r),this._Renderer2.removeAttribute(e,"disabled")}})}changeCount(e,r,n,i){r>=1&&(this._Renderer2.setAttribute(n,"disabled","true"),this._Renderer2.setAttribute(i,"disabled","true"),this._CartService.changeCountCart(e,r).subscribe({next:c=>{this.getCart=c.data,this._Renderer2.removeAttribute(n,"disabled"),this._Renderer2.removeAttribute(i,"disabled")},error:c=>{console.log(c),this._Renderer2.removeAttribute(n,"disabled"),this._Renderer2.removeAttribute(i,"disabled")}}))}static#t=this.\u0275fac=function(r){return new(r||s)(t.rXU(l.m),t.rXU(t.sFG))};static#e=this.\u0275cmp=t.VBU({type:s,selectors:[["app-cart"]],standalone:!0,features:[t.aNF],decls:17,vars:10,consts:[[1,"w-[98%]","md:w-[85%]","mx-auto","mt-14","bg-[#f0f3f2]","dark:bg-black","p-8","rounded-md"],[1,"flex","justify-between","items-center","gap-3","mb-4"],[1,"text-xl","font-light","dark:text-gray-200"],[1,"text-main","font-semibold","text-sm","md:text-lg"],[1,"disabled:opacity-40","disabled:cursor-not-allowed","bg-red-200","border","border-red-500","hover:text-white","hover:bg-red-500","transition-colors","duration-300","rounded-md","py-2","px-3",3,"click"],["btnClear",""],[4,"ngIf"],["class","nb-spinner",4,"ngIf"],[1,"bg-main","p-2","rounded-md","w-full","text-xl","text-white","mt-5",3,"routerLink"],["src","./assets/images/visa-1.svg","alt","visa",1,"inline-block"],["class","grid-cols-12 grid gap-3 md:gap-8 items-center border-gray-300 border-b-2 py-2",4,"ngFor","ngForOf"],[1,"grid-cols-12","grid","gap-3","md:gap-8","items-center","border-gray-300","border-b-2","py-2"],[1,"col-span-12","sm:col-span-3"],[1,"w-full",3,"src","alt"],[1,"col-span-12","sm:col-span-9"],[1,"grid-cols-12","grid","gap-1","sm:gap-8","items-center"],[1,"col-span-8","sm:col-span-8"],[1,"font-light","text-sm","lg:text-lg","dark:text-gray-200"],[1,"my-2","text-main","font-semibold"],[1,"text-red-500","disabled:opacity-40","disabled:cursor-not-allowed",3,"click"],["btnRemove",""],[1,"fa-solid","fa-trash"],[1,"col-span-4","sm:col-span-4","flex","gap-1","items-center","justify-end"],[1,"disabled:opacity-40","disabled:cursor-not-allowed","w-9","h-9","rounded-full","bg-green-400","border","border-green-600","hover:bg-green-600","transition-colors","duration-300","text-white","flex","justify-center","text-2xl",3,"click"],["btn1",""],[1,"dark:text-gray-200"],["btn2",""],[1,"nb-spinner"]],template:function(r,n){if(1&r){const i=t.RV6();t.j41(0,"section",0)(1,"div",1)(2,"div")(3,"h2",2),t.EFF(4,"Shop Cart"),t.k0s(),t.j41(5,"p",3),t.EFF(6),t.nI1(7,"currency"),t.k0s()(),t.j41(8,"div")(9,"button",4,5),t.bIt("click",function(){t.eBV(i);const u=t.sdS(10);return t.Njj(n.clearAllCart(u))}),t.EFF(11,"Clear All"),t.k0s()()(),t.DNE(12,a,2,1,"div",6),t.DNE(13,_,1,0,"div",7),t.j41(14,"button",8),t.EFF(15,"Online Payment "),t.nrm(16,"img",9),t.k0s()()}2&r&&(t.Y8G("@translateY",void 0),t.R7$(6),t.SpI("Total Price : ",t.i5U(7,5,n.getCart.totalCartPrice,"EGP")," "),t.R7$(6),t.Y8G("ngIf",0!=n.getCart.length),t.R7$(1),t.Y8G("ngIf",0==n.getCart.length),t.R7$(1),t.Y8G("routerLink",t.eq3(8,f,n.getCart._id)))},dependencies:[m.MD,m.Sq,m.bT,m.oe,C.Wk],data:{animation:[(0,d.hZ)("translateY",[(0,d.kY)("void=>*",[(0,d.iF)({opacity:0,transform:"translateY(100px)"}),(0,d.i0)(500,(0,d.iF)({opacity:1,transform:"translateY(0)"}))])])]}})}return s})()},6323:(g,p,o)=>{o.d(p,{m:()=>t});var m=o(4412),C=o(2598),d=o(1626);let t=(()=>{class l{constructor(a){this._HttpClient=a,this.cartNum=new m.t(0),this.baseUrl="https://ecommerce.routemisr.com/api/v1/"}addToCart(a){return this._HttpClient.post(this.baseUrl+"cart",{productId:a})}getCart(){return this._HttpClient.get(this.baseUrl+"cart")}removeCart(a){return this._HttpClient.delete(this.baseUrl+`cart/${a}`)}clearAllCart(){return this._HttpClient.delete(this.baseUrl+"cart")}changeCountCart(a,_){return this._HttpClient.put(this.baseUrl+`cart/${a}`,{count:_})}checkOutPayment(a,_){return this._HttpClient.post(`https://ecommerce.routemisr.com/api/v1/orders/checkout-session/${a}?url=https://moust2fa.github.io/E-Commerce/`,{shippingAddress:_})}allOrder(){return this._HttpClient.get(this.baseUrl+"orders/")}static#t=this.\u0275fac=function(_){return new(_||l)(C.KVO(d.Qq))};static#e=this.\u0275prov=C.jDH({token:l,factory:l.\u0275fac,providedIn:"root"})}return l})()}}]);