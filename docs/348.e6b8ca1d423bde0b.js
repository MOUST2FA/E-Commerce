"use strict";(self.webpackChunkprohects=self.webpackChunkprohects||[]).push([[348],{4348:(T,l,a)=>{a.r(l),a.d(l,{ForgetPasswordComponent:()=>N});var p=a(177),r=a(4341),d=a(9969),e=a(2598),m=a(1626);let c=(()=>{class s{constructor(t){this._HttpClient=t}forgotPasswords(t){return this._HttpClient.post("https://ecommerce.routemisr.com/api/v1/auth/forgotPasswords",t)}resetCode(t){return this._HttpClient.post("https://ecommerce.routemisr.com/api/v1/auth/verifyResetCode",t)}resetPassword(t){return this._HttpClient.put("https://ecommerce.routemisr.com/api/v1/auth/resetPassword",t)}static#e=this.\u0275fac=function(o){return new(o||s)(e.KVO(m.Qq))};static#t=this.\u0275prov=e.jDH({token:s,factory:s.\u0275fac,providedIn:"root"})}return s})();var u=a(3276);function f(s,i){1&s&&(e.j41(0,"p",10),e.EFF(1,"Required Email"),e.k0s())}function g(s,i){1&s&&(e.j41(0,"p",10),e.EFF(1,"Email is Invalid"),e.k0s())}function _(s,i){if(1&s&&(e.j41(0,"div",8),e.DNE(1,f,2,0,"p",9),e.DNE(2,g,2,0,"p",9),e.k0s()),2&s){const t=e.XpG(2);let o,n;e.R7$(1),e.Y8G("ngIf",null==(o=t.forgetCodePassword.get("email"))?null:o.getError("required")),e.R7$(1),e.Y8G("ngIf",null==(n=t.forgetCodePassword.get("email"))?null:n.getError("email"))}}function w(s,i){1&s&&e.nrm(0,"i",11)}function h(s,i){if(1&s&&(e.j41(0,"p",12),e.EFF(1),e.k0s()),2&s){const t=e.XpG(2);e.R7$(1),e.JRh(t.isMsg)}}function C(s,i){if(1&s){const t=e.RV6();e.j41(0,"section",1)(1,"form",2),e.bIt("ngSubmit",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.passwordForget())}),e.nrm(2,"input",3),e.DNE(3,_,3,2,"div",4),e.j41(4,"button",5),e.EFF(5,"Forgot Password "),e.DNE(6,w,1,0,"i",6),e.k0s(),e.DNE(7,h,2,1,"p",7),e.k0s()()}if(2&s){const t=e.XpG();let o;e.Y8G("@translateY",void 0),e.R7$(1),e.Y8G("formGroup",t.forgetCodePassword),e.R7$(2),e.Y8G("ngIf",(null==(o=t.forgetCodePassword.get("email"))?null:o.errors)&&(null==(o=t.forgetCodePassword.get("email"))?null:o.touched)),e.R7$(3),e.Y8G("ngIf",t.isLoading),e.R7$(1),e.Y8G("ngIf",t.isMsg)}}function F(s,i){1&s&&(e.j41(0,"p",10),e.EFF(1,"Required Password"),e.k0s())}function P(s,i){1&s&&(e.j41(0,"p",10),e.EFF(1,"Verify Reset Code"),e.k0s())}function x(s,i){if(1&s&&(e.j41(0,"div",8),e.DNE(1,F,2,0,"p",9),e.DNE(2,P,2,0,"p",9),e.k0s()),2&s){const t=e.XpG(2);let o,n;e.R7$(1),e.Y8G("ngIf",null==(o=t.resetCodeForm.get("resetCode"))?null:o.getError("required")),e.R7$(1),e.Y8G("ngIf",null==(n=t.resetCodeForm.get("resetCode"))?null:n.getError("pattern"))}}function R(s,i){1&s&&e.nrm(0,"i",11)}function E(s,i){if(1&s&&(e.j41(0,"p",12),e.EFF(1),e.k0s()),2&s){const t=e.XpG(2);e.R7$(1),e.JRh(t.isMsg)}}function G(s,i){if(1&s){const t=e.RV6();e.j41(0,"section",1)(1,"form",2),e.bIt("ngSubmit",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.passwordReset())}),e.nrm(2,"input",13),e.DNE(3,x,3,2,"div",4),e.j41(4,"button",5),e.EFF(5,"Reset Code "),e.DNE(6,R,1,0,"i",6),e.k0s(),e.DNE(7,E,2,1,"p",7),e.k0s()()}if(2&s){const t=e.XpG();let o;e.Y8G("@translateY",void 0),e.R7$(1),e.Y8G("formGroup",t.resetCodeForm),e.R7$(2),e.Y8G("ngIf",(null==(o=t.resetCodeForm.get("resetCode"))?null:o.errors)&&(null==(o=t.resetCodeForm.get("resetCode"))?null:o.touched)),e.R7$(3),e.Y8G("ngIf",t.isLoading),e.R7$(1),e.Y8G("ngIf",t.isMsg)}}function v(s,i){1&s&&(e.j41(0,"p",10),e.EFF(1,"Required Password"),e.k0s())}function b(s,i){1&s&&(e.j41(0,"p",10),e.EFF(1,"Reset Password"),e.k0s())}function Y(s,i){if(1&s&&(e.j41(0,"div",8),e.DNE(1,v,2,0,"p",9),e.DNE(2,b,2,0,"p",9),e.k0s()),2&s){const t=e.XpG(2);let o,n;e.R7$(1),e.Y8G("ngIf",null==(o=t.resetCodePassword.get("newPassword"))?null:o.getError("required")),e.R7$(1),e.Y8G("ngIf",null==(n=t.resetCodePassword.get("newPassword"))?null:n.getError("pattern"))}}function k(s,i){1&s&&e.nrm(0,"i",11)}function I(s,i){if(1&s&&(e.j41(0,"p",12),e.EFF(1),e.k0s()),2&s){const t=e.XpG(2);e.R7$(1),e.JRh(t.isMsg)}}function j(s,i){if(1&s){const t=e.RV6();e.j41(0,"section",1)(1,"form",2),e.bIt("ngSubmit",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.passwordCodeForget())}),e.nrm(2,"input",14),e.DNE(3,Y,3,2,"div",4),e.j41(4,"button",5),e.EFF(5,"Reset Password "),e.DNE(6,k,1,0,"i",6),e.k0s(),e.DNE(7,I,2,1,"p",7),e.k0s()()}if(2&s){const t=e.XpG();let o;e.Y8G("@translateY",void 0),e.R7$(1),e.Y8G("formGroup",t.resetCodePassword),e.R7$(2),e.Y8G("ngIf",(null==(o=t.resetCodePassword.get("newPassword"))?null:o.errors)&&(null==(o=t.resetCodePassword.get("newPassword"))?null:o.touched)),e.R7$(3),e.Y8G("ngIf",t.isLoading),e.R7$(1),e.Y8G("ngIf",t.isMsg)}}let N=(()=>{class s{constructor(t,o){this._ForgetPasswordService=t,this._Router=o,this.step1=!0,this.step2=!1,this.step3=!1,this.email="",this.isMsg="",this.isLoading=!1,this.forgetCodePassword=new r.gE({email:new r.MJ("",[r.k0.required,r.k0.email])}),this.resetCodeForm=new r.gE({resetCode:new r.MJ("",[r.k0.required,r.k0.pattern(/^[a-zA-Z0-9]{4,8}$/)])}),this.resetCodePassword=new r.gE({newPassword:new r.MJ("",[r.k0.required,r.k0.pattern(/^[A-Za-z0-9]{6,}/)])})}passwordForget(){this.isLoading=!0;let t=this.forgetCodePassword.value;this.email=t.email,this._ForgetPasswordService.forgotPasswords(t).subscribe({next:o=>{this.isMsg=o.message,this.isLoading=!1,this.step1=!1,this.step2=!0},error:o=>{this.isMsg=o.error.message,this.isLoading=!1}})}passwordReset(){this.isLoading=!0,this._ForgetPasswordService.resetCode(this.resetCodeForm.value).subscribe({next:o=>{this.isMsg=o.status,this.isLoading=!1,this.step2=!1,this.step3=!0},error:o=>{this.isMsg=o.error.status,this.isLoading=!1}})}passwordCodeForget(){this.isLoading=!0;let t=this.resetCodePassword.value;t.email=this.email,this._ForgetPasswordService.resetPassword(t).subscribe({next:o=>{o.token&&(localStorage.setItem("_token",o.token),this.isLoading=!1,this._Router.navigate(["/home"]))},error:o=>{this.isMsg=o.error.message,this.isLoading=!1}})}static#e=this.\u0275fac=function(o){return new(o||s)(e.rXU(c),e.rXU(u.Ix))};static#t=this.\u0275cmp=e.VBU({type:s,selectors:[["app-forget-password"]],standalone:!0,features:[e.aNF],decls:3,vars:3,consts:[["class","w-full md:w-1/2 rounded-md m-auto bg-[#f0f3f2] dark:bg-black shadow-md p-3 mt-16",4,"ngIf"],[1,"w-full","md:w-1/2","rounded-md","m-auto","bg-[#f0f3f2]","dark:bg-black","shadow-md","p-3","mt-16"],[3,"formGroup","ngSubmit"],["type","email","formControlName","email","placeholder","Email",1,"w-full","p-2","rounded-md","outline-none","focus:border-green-500","border-2"],["class","bg-red-100 px-4 py-2 rounded-md ",4,"ngIf"],[1,"bg-green-500","p-1","rounded-md","text-white","w-full","mt-3"],["class","fa fa-spin fa-spinner",4,"ngIf"],["class","bg-red-100 px-4 py-2 rounded-md  mt-3 w-100 text-center m-0 text-sm",4,"ngIf"],[1,"bg-red-100","px-4","py-2","rounded-md"],["class","text-sm m-0",4,"ngIf"],[1,"text-sm","m-0"],[1,"fa","fa-spin","fa-spinner"],[1,"bg-red-100","px-4","py-2","rounded-md","mt-3","w-100","text-center","m-0","text-sm"],["type","text","formControlName","resetCode","placeholder","Reset Code",1,"w-full","p-2","rounded-md","outline-none","focus:border-green-500","border-2"],["type","password","formControlName","newPassword","placeholder","Reset Password",1,"w-full","p-2","rounded-md","outline-none","focus:border-green-500","border-2"]],template:function(o,n){1&o&&(e.DNE(0,C,8,5,"section",0),e.DNE(1,G,8,5,"section",0),e.DNE(2,j,8,5,"section",0)),2&o&&(e.Y8G("ngIf",n.step1),e.R7$(1),e.Y8G("ngIf",n.step2),e.R7$(1),e.Y8G("ngIf",n.step3))},dependencies:[p.MD,p.bT,r.X1,r.qT,r.me,r.BC,r.cb,r.j4,r.JD],data:{animation:[(0,d.hZ)("translateY",[(0,d.kY)("void=>*",[(0,d.iF)({opacity:0,transform:"translateY(100px)"}),(0,d.i0)(500,(0,d.iF)({opacity:1,transform:"translateY(0)"}))])])]}})}return s})()}}]);